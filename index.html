<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; object-src 'none'">
    
    <title>Gym-Log Pro (AI Coach Edition)</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß†</text></svg>">
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="tab-buttons">
        <button class="tab-button active" data-page="workout">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
        <button class="tab-button" data-page="plans">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ù‡∏∂‡∏Å</button>
        <button class="tab-button" data-page="prs">PRs</button>
        <button class="tab-button" data-page="history">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
        <button class="tab-button" data-page="analysis">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
        <button class="tab-button" data-page="settings">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
    </div>

    <div id="workout" class="page active">
        <div class="page-title">
            <h1 id="workout-day-title"></h1>
            <button id="quick-log-btn-top" class="title-icon-btn" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πà‡∏ß‡∏ô">
                <i data-feather="zap"></i>
            </button>
            <button id="override-btn" class="override-btn">
                <i data-feather="calendar"></i>
            </button>
            <span id="total-duration-display"></span>
            
            <div id="quick-log-popup" class="popup-menu">
                <div id="quick-log-weight-training-btn" class="popup-menu-item">
                    <i data-feather="bar-chart-2"></i>
                    <span>Weight Training</span>
                </div>
                <div id="quick-log-cardio-btn" class="popup-menu-item">
                    <i data-feather="trending-up"></i>
                    <span>Cardio</span>
                </div>
            </div>
        </div>
        <div id="smart-assistant-box"></div>
        <div id="quick-log-form" class="card" style="display: none;">
            <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πà‡∏ß‡∏ô (Weight Training)</h3>
            <div class="log-input" style="flex-direction: column; gap:10px;">
                <input type="text" id="quick-log-exercise" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢" class="text-input">
                <select id="quick-log-muscle-group"></select>
                <div style="display: flex; gap: 10px;">
                    <input type="tel" pattern="[0-9.]*" id="quick-log-weight" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg)" class="text-input">
                    <input type="tel" pattern="[0-9]*" id="quick-log-reps" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á" class="text-input">
                </div>
            </div>
            <div style="display:flex; gap: 10px;">
                <button id="cancel-quick-log-btn" class="action-btn neutral" style="background-color: var(--card-color); color: var(--text-color); border: 1px solid var(--border-color);">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button id="save-quick-log-btn" class="action-btn success">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </div>
        </div>
        <div id="exercise-list"></div>
        <button id="finish-workout-btn" class="action-btn success"><i data-feather="check-circle"></i>‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</button>
    </div>
    
    <div id="plans" class="page"><div id="plan-editor-view"></div></div>

    <div id="prs" class="page">
        <h2>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (Personal Records)</h2>
        <p style="font-size:0.9em; opacity:0.8; margin-top:-10px; margin-bottom:20px;">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (Rep PRs)</p>
        <div id="pr-list-container"></div>
    </div>

    <div id="history" class="page">
        <h2>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</h2>
        <div id="calendar-view"></div>
        <input type="text" id="history-search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡πà‡∏≤...">
        <div id="history-container" style="margin-top: 15px;"></div>
    </div>

    <div id="analysis" class="page">
        <h2>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h2>
        <div class="tab-buttons analysis-tabs" style="margin-top: 15px;">
             <button class="tab-button analysis-tab-btn active" data-tab="overview">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°</button>
             <button class="tab-button analysis-tab-btn" data-tab="per_exercise">‡∏£‡∏≤‡∏¢‡∏ó‡πà‡∏≤</button>
             <button class="tab-button analysis-tab-btn" data-tab="comparison">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</button>
             <button class="tab-button analysis-tab-btn" data-tab="body">‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</button>
             <button class="tab-button analysis-tab-btn" data-tab="cardio">üèÉ ‡∏Ñ‡∏≤‡∏£‡πå‡∏î‡∏¥‡πÇ‡∏≠</button>
        </div>

        <div id="analysis-overview" class="analysis-sub-page active">
            </div>

        <div id="analysis-per_exercise" class="analysis-sub-page">
            </div>

        <div id="analysis-comparison" class="analysis-sub-page">
            <div class="card">
                <h3>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ (e1RM)</h3>
                <p style="font-size:0.9em; opacity:0.8; margin-top:-10px; margin-bottom:15px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 2-5 ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (‡∏Å‡∏î Ctrl ‡∏´‡∏£‡∏∑‡∏≠ Command ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡πà‡∏≤)</p>
                <select id="compare-exercise-select" multiple></select>
                <button id="generate-comparison-chart-btn" class="action-btn secondary">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</button>
                <div class="chart-container"><canvas id="comparisonChart"></canvas></div>
            </div>
        </div>

        <div id="analysis-body" class="analysis-sub-page">
            <div class="card">
                <h3>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                <div class="stat-input-group">
                    <input type="tel" pattern="[0-9.]*" id="stat-weight" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏ß (kg)">
                    <input type="tel" pattern="[0-9.]*" id="stat-bf" placeholder="% ‡πÑ‡∏Ç‡∏°‡∏±‡∏ô">
                </div>
                 <div class="stat-input-group" style="margin-top:10px;">
                    <input type="tel" pattern="[0-9.]*" id="stat-chest" placeholder="‡∏£‡∏≠‡∏ö‡∏≠‡∏Å (cm)">
                    <input type="tel" pattern="[0-9.]*" id="stat-waist" placeholder="‡∏£‡∏≠‡∏ö‡πÄ‡∏≠‡∏ß (cm)">
                    <input type="tel" pattern="[0-9.]*" id="stat-arm" placeholder="‡∏£‡∏≠‡∏ö‡πÅ‡∏Ç‡∏ô (cm)">
                </div>
                <button id="save-body-stats-btn" class="action-btn success"><i data-feather="save"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>
            <div class="card">
                <h3>‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</h3>
                <select id="body-stat-select"></select>
                <div class="chart-container"><canvas id="bodyStatChart"></canvas></div>
            </div>
        </div>
        
        <div id="analysis-cardio" class="analysis-sub-page">
           </div>
    </div>

    <div id="settings" class="page">
        <h2>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
        <div class="card">
            <h3>‡∏ò‡∏µ‡∏°</h3>
            <button id="toggle-theme-btn" class="action-btn secondary"><i data-feather="moon"></i>‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°</button>
        </div>
        
        <div class="card">
            <h3>‡πÇ‡∏£‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå (Home Gym)</h3>
            <p style="opacity:0.8; font-size:0.9em;">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏Å‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡πà‡∏ô‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚öñÔ∏è ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</p>
            <div class="log-input" style="flex-direction: column; gap: 15px;">
                <input type="tel" pattern="[0-9.]*" id="equipment-barbell-weight" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏Å‡∏ô‡πÄ‡∏õ‡∏•‡πà‡∏≤ (kg)">
                <input type="text" id="equipment-plates" placeholder="‡πÅ‡∏ú‡πà‡∏ô‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ (‡πÄ‡∏ä‡πà‡∏ô 10, 5, 2.5, 1.25)">
            </div>
            <button id="save-equipment-btn" class="action-btn success"><i data-feather="save"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</button>
        </div>

        <div class="card">
            <h3>‡∏™‡∏≥‡∏£‡∏≠‡∏á/‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
            <p style="opacity:0.8; font-size:0.9em;">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</p>
            <button id="backup-btn" class="action-btn secondary"><i data-feather="download"></i>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå</button>
            <button id="restore-btn" class="action-btn success"><i data-feather="upload"></i>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå</button>
            <input type="file" id="restore-file-input" accept=".json" style="display: none;">
        </div>
    </div>
</div>

<div id="rest-timer">
    <button data-adjust="-15">-15s</button>
    <div id="timer-display">1:30</div>
    <button data-adjust="15">+15s</button>
    <button id="stop-timer-btn">‡∏´‡∏¢‡∏∏‡∏î</button>
</div>

<div id="plate-calculator-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" data-modal-id="plate-calculator-modal">&times;</span>
        <h2>Plate Calculator</h2>
        <h3 id="calculator-target-weight" style="border:none;"></h3>
        <div class="barbell-vis" id="barbell-visualization"></div>
        <p id="plates-per-side-text"></p>
    </div>
</div>

<div id="summary-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" data-modal-id="summary-modal">&times;</span>
        <h2 style="color:var(--success-color);"><i data-feather="award" id="summary-trophy"></i> ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å!</h2>
        <button class="action-btn secondary close-modal-btn" data-modal-id="summary-modal">‡∏õ‡∏¥‡∏î</button>
    </div>
</div>

<div id="override-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" data-modal-id="override-modal">&times;</span>
        <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
        <div id="override-list"></div>
    </div>
</div>

<div id="cardio-log-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" data-modal-id="cardio-log-modal">&times;</span>
        <h3 style="border:none; margin-top:0;">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° Cardio</h3>
        <button id="save-cardio-log-btn" class="action-btn success"><i data-feather="plus-circle"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>
</div>

<div id="update-notification">
    <span>‡∏°‡∏µ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
    <button id="update-btn" class="action-btn secondary">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
</div>

<script src="app.js"></script>

</body>
</html>
